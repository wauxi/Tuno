# üìê –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ Musicboard

**–î–∞—Ç–∞:** 2025-10-30  
**–í–µ—Ä—Å–∏—è:** 2.0 (–ü–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞)

---

## üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
musicboard_2/
‚îú‚îÄ‚îÄ js/
‚îÇ   ‚îú‚îÄ‚îÄ main.js                    # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ components/                # UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AlbumGrid.js          # –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–µ—Ç–∫–∏ –∞–ª—å–±–æ–º–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AlbumMenuManager.js   # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ–Ω—é –∞–ª—å–±–æ–º–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RatingModalComponent.js # Web Component –¥–ª—è –º–æ–¥–∞–ª–∫–∏ —Ä–µ–π—Ç–∏–Ω–≥–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ UIManager.js          # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ UI —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ managers/                  # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RatingManager.js      # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–π—Ç–∏–Ω–≥–∞–º–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ SearchManager.js      # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–∏—Å–∫–æ–º
‚îÇ   ‚îú‚îÄ‚îÄ services/                  # –°–µ—Ä–≤–∏—Å—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AuthService.js        # –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DataService.js        # –†–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏ –∞–ª—å–±–æ–º–æ–≤
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ UserService.js        # –†–∞–±–æ—Ç–∞ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ utils/                     # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AuthManager.js        # –°—Ç–∞—Ä—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (legacy)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ EventBus.js           # –°–∏—Å—Ç–µ–º–∞ —Å–æ–±—ã—Ç–∏–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Navigation.js         # –ù–∞–≤–∏–≥–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ RatingUtils.js        # –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–µ–π—Ç–∏–Ω–≥–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ config/                    # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ       ‚îî‚îÄ‚îÄ constants.js          # –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ php/                           # Backend PHP
‚îÇ   ‚îú‚îÄ‚îÄ api.php                   # –û—Å–Ω–æ–≤–Ω–æ–µ API
‚îÇ   ‚îú‚îÄ‚îÄ auth-api.php              # API –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ ratings-api.php           # API —Ä–µ–π—Ç–∏–Ω–≥–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ get-users.php             # –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ Database.php              # –ö–ª–∞—Å—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
‚îÇ   ‚îî‚îÄ‚îÄ config.php                # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ë–î
‚îú‚îÄ‚îÄ css/                           # –°—Ç–∏–ª–∏
‚îú‚îÄ‚îÄ img/                           # –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ fonts/                         # –®—Ä–∏—Ñ—Ç—ã
‚îú‚îÄ‚îÄ Home.html                      # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
‚îî‚îÄ‚îÄ login.html                     # –°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Ö–æ–¥–∞
```

---

## üéØ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Å–ª–æ–∏

### 1. **Presentation Layer (UI)**
–û—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º.

#### main.js (209 —Å—Ç—Ä–æ–∫)
**–†–æ–ª—å:** –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

**–ö–ª–∞—Å—Å:** `MusicboardApp`

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤
- –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –º–µ–∂–¥—É –º–æ–¥—É–ª—è–º–∏
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–æ—É—Ç–∏–Ω–≥–∞ (URL –ø–∞—Ä–∞–º–µ—Ç—Ä—ã)

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
```javascript
- Navigation          // –ù–∞–≤–∏–≥–∞—Ü–∏—è
- DataService         // –î–∞–Ω–Ω—ã–µ –∞–ª—å–±–æ–º–æ–≤
- AlbumGrid           // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–µ—Ç–∫–∏
- RatingManager       // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–π—Ç–∏–Ω–≥–∞–º–∏
- SearchManager       // –ü–æ–∏—Å–∫
- AuthService         // –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- UserService         // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- UIManager           // UI —ç–ª–µ–º–µ–Ω—Ç—ã
- AlbumMenuManager    // –ú–µ–Ω—é –∞–ª—å–±–æ–º–æ–≤
- EventBus            // –°–æ–±—ã—Ç–∏—è
- Constants           // –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã
```

**–ú–µ—Ç–æ–¥—ã:**
- `init()` - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- `initDataServices()` - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤ –¥–∞–Ω–Ω—ã—Ö
- `initRatingSystem()` - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã —Ä–µ–π—Ç–∏–Ω–≥–æ–≤
- `loadData()` - –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
- `switchUser(userId)` - –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `goToLogin()` / `goToSignup()` - –ù–∞–≤–∏–≥–∞—Ü–∏—è
- `logout()` - –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
- `refreshRatings()` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–π—Ç–∏–Ω–≥–æ–≤

**EventBus —Å–æ–±—ã—Ç–∏—è:**
- –°–ª—É—à–∞–µ—Ç: `EVENTS.RATING_UPDATED`, `EVENTS.USER_SWITCH`, `EVENTS.NAVIGATE`
- –≠–º–∏—Ç–∏—Ç: `EVENTS.USER_LOGOUT`

---

#### components/AlbumGrid.js (~150 —Å—Ç—Ä–æ–∫)
**–†–æ–ª—å:** –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–µ—Ç–∫–∏ –∞–ª—å–±–æ–º–æ–≤

**–ö–ª–∞—Å—Å:** `AlbumGrid`

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Å–ø–∏—Å–∫–∞ –∞–ª—å–±–æ–º–æ–≤
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–π—Ç–∏–Ω–≥–æ–≤
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è HTML –∫–∞—Ä—Ç–æ—á–µ–∫ –∞–ª—å–±–æ–º–æ–≤

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
- `RatingUtils` - –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∑–≤–µ–∑–¥
- `DataService` - –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

**–ú–µ—Ç–æ–¥—ã:**
- `render()` - –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Å–µ—Ç–∫–∏
- `generateAlbumCard(album)` - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è HTML –∫–∞—Ä—Ç–æ—á–∫–∏ –∞–ª—å–±–æ–º–∞
- `attachEvents()` - –ü—Ä–∏–≤—è–∑–∫–∞ —Å–æ–±—ã—Ç–∏–π

---

#### components/AlbumMenuManager.js (202 —Å—Ç—Ä–æ–∫–∏)
**–†–æ–ª—å:** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–º –º–µ–Ω—é –∞–ª—å–±–æ–º–æ–≤

**–ö–ª–∞—Å—Å:** `AlbumMenuManager`

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–µ–Ω—é –∞–ª—å–±–æ–º–æ–≤
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–µ–π—Å—Ç–≤–∏–π –º–µ–Ω—é (–Ω–∞–ø–∏—Å–∞—Ç—å –æ—Ç–∑—ã–≤, —É–¥–∞–ª–∏—Ç—å, –ø–µ—Ä–µ–π—Ç–∏ –≤ Spotify)
- –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ä–µ–π—Ç–∏–Ω–≥–æ–≤
- –£–¥–∞–ª–µ–Ω–∏–µ –∞–ª—å–±–æ–º–æ–≤ (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–æ–≤)

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
- `AuthService` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤
- `RatingManager` - –æ—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª–∫–∏ —Ä–µ–π—Ç–∏–Ω–≥–∞
- `DataService` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- `UI` (constants) - –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∑–∞–¥–µ—Ä–∂–µ–∫

**–ú–µ—Ç–æ–¥—ã:**
- `initAlbumMenus()` - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –º–µ–Ω—é
- `attachMenuHandlers(menu)` - –ü—Ä–∏–≤—è–∑–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
- `handleWriteReview(albumId, albumElement)` - –û—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª–∫–∏ —Ä–µ–π—Ç–∏–Ω–≥–∞
- `getExistingRating(albumId)` - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Ä–µ–π—Ç–∏–Ω–≥–∞
- `handleRemoveFromListenLater(albumId)` - –£–¥–∞–ª–µ–Ω–∏–µ –∞–ª—å–±–æ–º–∞ (–∞–¥–º–∏–Ω)
- `handleGoToAlbum(albumElement)` - –ü–µ—Ä–µ—Ö–æ–¥ –≤ Spotify
- `extractAlbumData(element, albumId)` - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∞–ª—å–±–æ–º–∞ –∏–∑ DOM

---

#### components/RatingModalComponent.js (572 —Å—Ç—Ä–æ–∫–∏)
**–†–æ–ª—å:** Web Component –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ —Ä–µ–π—Ç–∏–Ω–≥–∞

**–ö–ª–∞—Å—Å:** `RatingModal extends HTMLElement`

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã —Ä–µ–π—Ç–∏–Ω–≥–∞
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–≤–µ–∑–¥–∞–º–∏ —Ä–µ–π—Ç–∏–Ω–≥–∞
- –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö —Ñ–æ—Ä–º—ã
- Shadow DOM –∏–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—è —Å—Ç–∏–ª–µ–π

**–ê—Ç—Ä–∏–±—É—Ç—ã:**
- `album-id` - ID –∞–ª—å–±–æ–º–∞
- `album-name` - –ù–∞–∑–≤–∞–Ω–∏–µ –∞–ª—å–±–æ–º–∞
- `artist` - –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å
- `cover-url` - URL –æ–±–ª–æ–∂–∫–∏

**–°–æ–±—ã—Ç–∏—è (CustomEvent):**
- `save` - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–π—Ç–∏–Ω–≥–∞
  ```javascript
  detail: {
      album_id, rating, favorite_song, 
      least_favorite_song, must_listen,
      would_relisten, listened_date, review
  }
  ```
- `delete` - –£–¥–∞–ª–µ–Ω–∏–µ —Ä–µ–π—Ç–∏–Ω–≥–∞
  ```javascript
  detail: { album_id }
  ```
- `close` - –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª–∫–∏

**–ú–µ—Ç–æ–¥—ã:**
- `render()` - –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ Shadow DOM
- `getStyles()` - –°—Ç–∏–ª–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
- `generateStars()` - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è HTML –∑–≤–µ–∑–¥
- `attachEventListeners()` - –ü—Ä–∏–≤—è–∑–∫–∞ —Å–æ–±—ã—Ç–∏–π
- `handleStarClick(e)` - –ö–ª–∏–∫ –ø–æ –∑–≤–µ–∑–¥–µ
- `handleStarHover(e)` - –ù–∞–≤–µ–¥–µ–Ω–∏–µ –Ω–∞ –∑–≤–µ–∑–¥—É
- `updateStars(rating, isHover)` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∑–≤–µ–∑–¥
- `getFormData()` - –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Ñ–æ—Ä–º—ã
- `save()` - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
- `delete()` - –£–¥–∞–ª–µ–Ω–∏–µ
- `close()` - –ó–∞–∫—Ä—ã—Ç–∏–µ
- `setRating(ratingData)` - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Ä–µ–π—Ç–∏–Ω–≥–∞ (–¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)

**Lifecycle –º–µ—Ç–æ–¥—ã:**
- `connectedCallback()` - –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –≤ DOM
- `disconnectedCallback()` - –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∏–∑ DOM
- `attributeChangedCallback()` - –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∞—Ç—Ä–∏–±—É—Ç–æ–≤

---

#### components/UIManager.js (~200 —Å—Ç—Ä–æ–∫)
**–†–æ–ª—å:** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ UI —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

**–ö–ª–∞—Å—Å:** `UIManager`

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∏–¥–∏–º–æ—Å—Ç—å—é –∫–Ω–æ–ø–æ–∫ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø—Ä–∞–≤

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
- `AuthService` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- `UserService` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö

**–ú–µ—Ç–æ–¥—ã:**
- `updateUI()` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å–µ–≥–æ UI
- `setViewingUserId(userId)` - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–µ–º–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `showUserInfo()` - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
- `hideLoginButtons()` / `showLoginButtons()` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∞–º–∏

---

### 2. **Business Logic Layer (Managers)**

#### managers/RatingManager.js (172 —Å—Ç—Ä–æ–∫–∏)
**–†–æ–ª—å:** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–π—Ç–∏–Ω–≥–∞–º–∏

**–ö–ª–∞—Å—Å:** `RatingManager`

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å —Ä–µ–π—Ç–∏–Ω–≥–∞–º–∏
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ —Ä–µ–π—Ç–∏–Ω–≥–∞
- –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å API —Ä–µ–π—Ç–∏–Ω–≥–æ–≤

**API –º–µ—Ç–æ–¥—ã:**
- `addRating(albumId, ratingData)` - POST –∑–∞–ø—Ä–æ—Å
- `updateRating(ratingId, ratingData)` - PUT –∑–∞–ø—Ä–æ—Å
- `deleteRating(ratingId)` - DELETE –∑–∞–ø—Ä–æ—Å
- `getRating(albumId, userId)` - GET –∑–∞–ø—Ä–æ—Å

**UI –º–µ—Ç–æ–¥—ã:**
- `showRatingModalComponent(albumData, existingRating)` - –ü–æ–∫–∞–∑–∞—Ç—å –º–æ–¥–∞–ª–∫—É
- `handleSave(ratingData, existingRating)` - –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
- `handleDelete(existingRating)` - –û–±—Ä–∞–±–æ—Ç–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è

**–£—Ç–∏–ª–∏—Ç—ã:**
- `isUserLoggedIn()` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- `generateStarRating(rating)` - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–≤–µ–∑–¥ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
- `generateInteractiveStarRating(rating)` - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–≤–µ–∑–¥

**EventBus:**
- –≠–º–∏—Ç–∏—Ç: `EVENTS.RATING_UPDATED`, `EVENTS.RATING_DELETED`

---

#### managers/SearchManager.js (~200 —Å—Ç—Ä–æ–∫)
**–†–æ–ª—å:** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–∏—Å–∫–æ–º –∞–ª—å–±–æ–º–æ–≤

**–ö–ª–∞—Å—Å:** `SearchManager`

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –ü–æ–∏—Å–∫ –∞–ª—å–±–æ–º–æ–≤ —á–µ—Ä–µ–∑ Spotify API
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–æ–≤ –ø–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
- `RatingManager` - –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª–∫–∏ –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- `UI.SEARCH_DEBOUNCE` - –∑–∞–¥–µ—Ä–∂–∫–∞ debounce

**–ú–µ—Ç–æ–¥—ã:**
- `init()` - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
- `bindEvents()` - –ü—Ä–∏–≤—è–∑–∫–∞ —Å–æ–±—ã—Ç–∏–π
- `performSearch(query)` - –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ–∏—Å–∫–∞
- `displayResults(albums)` - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- `hideResults()` - –°–∫—Ä—ã—Ç–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- `handleAlbumClick(albumData)` - –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–∞ –Ω–∞ –∞–ª—å–±–æ–º

---

### 3. **Data Layer (Services)**

#### services/AuthService.js (~150 —Å—Ç—Ä–æ–∫)
**–†–æ–ª—å:** –°–µ—Ä–≤–∏—Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

**–ö–ª–∞—Å—Å:** `AuthService`

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –≤—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏–µ–π
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ (–∞–¥–º–∏–Ω/–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)

**–ú–µ—Ç–æ–¥—ã:**
- `login(username, password)` - –í—Ö–æ–¥
- `register(username, displayName, password)` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- `logout()` - –í—ã—Ö–æ–¥
- `checkAuth()` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- `isUserLoggedIn()` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —Å–µ—Å—Å–∏–∏
- `isAdmin()` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- `getCurrentUser()` - –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–•—Ä–∞–Ω–µ–Ω–∏–µ:**
- `localStorage.currentUser` - JSON —Å –¥–∞–Ω–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `localStorage.currentUserId` - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

---

#### services/DataService.js (~250 —Å—Ç—Ä–æ–∫)
**–†–æ–ª—å:** –°–µ—Ä–≤–∏—Å —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏ –∞–ª—å–±–æ–º–æ–≤

**–ö–ª–∞—Å—Å:** `DataService`

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –æ –Ω–µ–¥–∞–≤–Ω–æ –ø—Ä–æ—Å–ª—É—à–∞–Ω–Ω—ã—Ö –∞–ª—å–±–æ–º–∞—Ö
- –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ "–ü–æ—Å–ª—É—à–∞—Ç—å –ø–æ–∑–∂–µ"
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- –û–±–æ–≥–∞—â–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Ä–µ–π—Ç–∏–Ω–≥–∞–º–∏ –∏ –æ–±–ª–æ–∂–∫–∞–º–∏

**–ú–µ—Ç–æ–¥—ã:**
- `loadData(forceReload)` - –ó–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö
- `getRecentlyListened()` - –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–µ–¥–∞–≤–Ω–æ –ø—Ä–æ—Å–ª—É—à–∞–Ω–Ω—ã—Ö
- `getListenLater()` - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ "–ü–æ—Å–ª—É—à–∞—Ç—å –ø–æ–∑–∂–µ"
- `clearCache()` - –û—á–∏—Å—Ç–∫–∞ –∫–µ—à–∞
- `enrichAlbumsWithRatings(albums)` - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–π—Ç–∏–Ω–≥–æ–≤ –∫ –∞–ª—å–±–æ–º–∞–º
- `enrichAlbumsWithCovers(albums)` - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ–±–ª–æ–∂–µ–∫

**–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- `localStorage.recentActivity` - –ö–µ—à –Ω–µ–¥–∞–≤–Ω–∏—Ö
- `localStorage.listenLater` - –ö–µ—à —Å–ø–∏—Å–∫–∞ "–ü–æ—Å–ª—É—à–∞—Ç—å –ø–æ–∑–∂–µ"
- –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ –∫–µ—à–∞: `CONFIG.CACHE.LIFETIME` (1 —á–∞—Å)

---

#### services/UserService.js (50 —Å—Ç—Ä–æ–∫)
**–†–æ–ª—å:** –°–µ—Ä–≤–∏—Å —Ä–∞–±–æ—Ç—ã —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

**–ö–ª–∞—Å—Å:** `UserService`

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –ø–æ ID
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–ú–µ—Ç–æ–¥—ã:**
- `loadUsers()` - –ó–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `getUserById(userId)` - –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ ID
- `getUserNameById(userId)` - –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `getAllUsers()` - –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–ö–µ—à:**
- `this.usersCache` - –ú–∞—Å—Å–∏–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –ø–∞–º—è—Ç–∏

---

### 4. **Utilities Layer**

#### utils/EventBus.js (139 —Å—Ç—Ä–æ–∫)
**–†–æ–ª—å:** –°–∏—Å—Ç–µ–º–∞ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –º–µ–∂–º–æ–¥—É–ª—å–Ω–æ–π –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏

**–ö–ª–∞—Å—Å:** `EventBus`

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –ü—É–±–ª–∏–∫–∞—Ü–∏—è/–ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Å–æ–±—ã—Ç–∏—è
- –°–ª–∞–±–∞—è —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å –º–æ–¥—É–ª–µ–π
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π

**–ú–µ—Ç–æ–¥—ã:**
- `on(event, callback)` - –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Å–æ–±—ã—Ç–∏–µ
- `once(event, callback)` - –û–¥–Ω–æ—Ä–∞–∑–æ–≤–∞—è –ø–æ–¥–ø–∏—Å–∫–∞
- `off(event, callback)` - –û—Ç–ø–∏—Å–∫–∞
- `emit(event, data)` - –≠–º–∏—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è
- `clear(event)` - –û—á–∏—Å—Ç–∫–∞ –ø–æ–¥–ø–∏—Å–æ–∫

**–ü—Ä–µ–¥–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è:**
```javascript
EVENTS = {
    // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
    USER_LOGIN: 'user:login',
    USER_LOGOUT: 'user:logout',
    USER_SWITCH: 'user:switch',
    USER_UPDATED: 'user:updated',
    
    // –†–µ–π—Ç–∏–Ω–≥–∏
    RATING_ADDED: 'rating:added',
    RATING_UPDATED: 'rating:updated',
    RATING_DELETED: 'rating:deleted',
    RATINGS_LOADED: 'ratings:loaded',
    
    // –ê–ª—å–±–æ–º—ã
    ALBUM_ADDED: 'album:added',
    ALBUM_REMOVED: 'album:removed',
    ALBUM_UPDATED: 'album:updated',
    
    // UI
    MODAL_OPENED: 'modal:opened',
    MODAL_CLOSED: 'modal:closed',
    SEARCH_QUERY: 'search:query',
    SEARCH_RESULTS: 'search:results',
    
    // –î–∞–Ω–Ω—ã–µ
    DATA_LOADED: 'data:loaded',
    DATA_ERROR: 'data:error',
    
    // –ù–∞–≤–∏–≥–∞—Ü–∏—è
    NAVIGATE: 'navigate',
    ROUTE_CHANGED: 'route:changed',
}
```

---

#### utils/RatingUtils.js (~100 —Å—Ç—Ä–æ–∫)
**–†–æ–ª—å:** –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ä–µ–π—Ç–∏–Ω–≥–∞–º–∏

**–ö–ª–∞—Å—Å:** `RatingUtils` (—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π)

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è HTML –∑–≤–µ–∑–¥ —Ä–µ–π—Ç–∏–Ω–≥–∞
- –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –º–µ–∂–¥—É 5-–∑–≤–µ–∑–¥–æ—á–Ω–æ–π –∏ 10-–±–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö –∏ —Å—Ç–∞—Ç–∏—á–Ω—ã—Ö –∑–≤–µ–∑–¥

**–ú–µ—Ç–æ–¥—ã:**
- `generateStarRating(rating, showNumber)` - –°—Ç–∞—Ç–∏—á–Ω—ã–µ –∑–≤–µ–∑–¥—ã
- `generateInteractiveStarRating(rating)` - –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∑–≤–µ–∑–¥—ã
- `getStarClass(index, rating)` - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–ª–∞—Å—Å–∞ –∑–≤–µ–∑–¥—ã

---

#### utils/Navigation.js (~80 —Å—Ç—Ä–æ–∫)
**–†–æ–ª—å:** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π

**–ö–ª–∞—Å—Å:** `Navigation`

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–æ–≤ –ø–æ –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–º —ç–ª–µ–º–µ–Ω—Ç–∞–º
- –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∞
- –°–∫—Ä–æ–ª–ª–∏–Ω–≥ –∫ —Å–µ–∫—Ü–∏—è–º

---

#### utils/AuthManager.js (150 —Å—Ç—Ä–æ–∫) [LEGACY]
**–†–æ–ª—å:** –°—Ç–∞—Ä—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –£—Å—Ç–∞—Ä–µ–ª, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ `AuthService`

---

### 5. **Configuration Layer**

#### config/constants.js (112 —Å—Ç—Ä–æ–∫)
**–†–æ–ª—å:** –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –≤—Å–µ—Ö –∫–æ–Ω—Å—Ç–∞–Ω—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

**–≠–∫—Å–ø–æ—Ä—Ç—ã:**
```javascript
CONFIG = {
    API: {
        BASE_URL, ENDPOINTS, TIMEOUT
    },
    CACHE: {
        LIFETIME, KEYS
    },
    DEFAULTS: {
        USER_ID, GUEST_USER_ID, ITEMS_PER_PAGE, COVER_PLACEHOLDER
    },
    UI: {
        SEARCH_DEBOUNCE,        // 300ms
        ANIMATION_DURATION,     // 300ms
        MODAL_SHOW_DELAY,       // 10ms
        INIT_DELAY,             // 100ms
        NOTIFICATION_DURATION,  // 5000ms
        RATING_LOAD_DELAY,      // 100ms
    },
    ROUTES: {
        HOME, LOGIN, SIGNUP
    },
    ROLES: {
        ADMIN, USER, GUEST
    },
    RATING: {
        MIN, MAX, STARS, HALF_STAR_ENABLED
    },
    IMAGES: {
        PLACEHOLDER, FALLBACK
    },
    FEATURES: {
        ENABLE_SEARCH, ENABLE_CACHE, ENABLE_NOTIFICATIONS, DEBUG_MODE
    }
}
```

**Helper —Ñ—É–Ω–∫—Ü–∏–∏:**
- `getApiUrl(endpoint)` - –ü–æ–ª—É—á–µ–Ω–∏–µ URL API
- `getCacheKey(key)` - –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–ª—é—á–∞ –∫–µ—à–∞
- `getRoute(route)` - –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–æ—É—Ç–∞
- `isDebugMode()` - –ü—Ä–æ–≤–µ—Ä–∫–∞ debug —Ä–µ–∂–∏–º–∞

---

## üîÑ –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

### 1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```
DOMContentLoaded
    ‚Üì
main.js: MusicboardApp.init()
    ‚Üì
AuthService.checkAuth()
    ‚Üì
UserService.loadUsers()
    ‚Üì
DataService.loadData()
    ‚Üì
AlbumGrid.render()
    ‚Üì
AlbumMenuManager.initAlbumMenus()
```

### 2. –û—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª–∫–∏ —Ä–µ–π—Ç–∏–Ω–≥–∞
```
–ö–ª–∏–∫ "Write Review"
    ‚Üì
AlbumMenuManager.handleWriteReview()
    ‚Üì
AlbumMenuManager.getExistingRating() (API call)
    ‚Üì
RatingManager.showRatingModalComponent()
    ‚Üì
<rating-modal> —Å–æ–∑–¥–∞–µ—Ç—Å—è –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ DOM
    ‚Üì
RatingModal.connectedCallback()
    ‚Üì
RatingModal.render() (Shadow DOM)
    ‚Üì
RatingModal.setRating() (–µ—Å–ª–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
```

### 3. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–π—Ç–∏–Ω–≥–∞
```
–ö–ª–∏–∫ "Save" –≤ –º–æ–¥–∞–ª–∫–µ
    ‚Üì
RatingModal.save()
    ‚Üì
CustomEvent 'save' (detail: ratingData)
    ‚Üì
RatingManager.handleSave()
    ‚Üì
API: POST/PUT php/ratings-api.php
    ‚Üì
EventBus.emit(EVENTS.RATING_UPDATED)
    ‚Üì
window.location.reload()
```

### 4. –ü–æ–∏—Å–∫ –∞–ª—å–±–æ–º–∞
```
–í–≤–æ–¥ –≤ –ø–æ–∏—Å–∫–æ–≤—É—é —Å—Ç—Ä–æ–∫—É
    ‚Üì
SearchManager.performSearch() (debounce 300ms)
    ‚Üì
API: php/api.php?action=search&query=...
    ‚Üì
SearchManager.displayResults()
    ‚Üì
–ö–ª–∏–∫ –ø–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É
    ‚Üì
SearchManager.handleAlbumClick()
    ‚Üì
RatingManager.showRatingModalComponent()
```

---

## üîå API Endpoints

### PHP Backend

#### 1. `php/api.php`
**–ú–µ—Ç–æ–¥—ã:**
- `GET ?action=get_listen_later` - –°–ø–∏—Å–æ–∫ "–ü–æ—Å–ª—É—à–∞—Ç—å –ø–æ–∑–∂–µ"
- `GET ?action=get_recent_activity&user_id={id}` - –ù–µ–¥–∞–≤–Ω–æ –ø—Ä–æ—Å–ª—É—à–∞–Ω–Ω—ã–µ
- `GET ?action=search&query={q}` - –ü–æ–∏—Å–∫ —á–µ—Ä–µ–∑ Spotify
- `POST action=remove_from_listen_later` - –£–¥–∞–ª–µ–Ω–∏–µ –∞–ª—å–±–æ–º–∞

#### 2. `php/auth-api.php`
**–ú–µ—Ç–æ–¥—ã:**
- `POST ?action=login` - –í—Ö–æ–¥
  ```json
  { "username": "...", "password": "..." }
  ```
- `POST ?action=register` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
  ```json
  { "username": "...", "display_name": "...", "password": "..." }
  ```
- `POST ?action=logout` - –í—ã—Ö–æ–¥

#### 3. `php/ratings-api.php`
**–ú–µ—Ç–æ–¥—ã:**
- `GET ?album_id={id}&user_id={id}` - –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–π—Ç–∏–Ω–≥–∞
- `POST` - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–π—Ç–∏–Ω–≥–∞
  ```json
  {
    "album_id": 123,
    "user_id": 1,
    "rating": 8,
    "favorite_song": "...",
    "least_favorite_song": "...",
    "must_listen": 1,
    "would_relisten": 1,
    "listened_date": "2025-10-30",
    "review": "..."
  }
  ```
- `PUT` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–π—Ç–∏–Ω–≥–∞
  ```json
  {
    "rating_id": 456,
    ...–æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è
  }
  ```
- `DELETE` - –£–¥–∞–ª–µ–Ω–∏–µ —Ä–µ–π—Ç–∏–Ω–≥–∞
  ```json
  { "rating_id": 456 }
  ```

#### 4. `php/get-users.php`
**–ú–µ—Ç–æ–¥:**
- `GET` - –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  ```json
  {
    "success": true,
    "users": [
      { "id": 1, "username": "...", "display_name": "..." }
    ]
  }
  ```

---

## üé® Design Patterns

### 1. **Singleton**
- `EventBus` - –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä `eventBus`
- `Database.php` - Singleton –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î

### 2. **Observer (Event-Driven)**
- `EventBus` —Ä–µ–∞–ª–∏–∑—É–µ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω Observer
- –ú–æ–¥—É–ª–∏ –ø–æ–¥–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –Ω–∞ —Å–æ–±—ã—Ç–∏—è –∏ —Ä–µ–∞–≥–∏—Ä—É—é—Ç

### 3. **Service Layer**
- `AuthService`, `DataService`, `UserService` - —Å–µ—Ä–≤–∏—Å–Ω—ã–π —Å–ª–æ–π
- –ò–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏

### 4. **Web Components**
- `RatingModalComponent` - –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- Shadow DOM –¥–ª—è –∏–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏–∏ —Å—Ç–∏–ª–µ–π

### 5. **Facade**
- `RatingManager` - —Ñ–∞—Å–∞–¥ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ä–µ–π—Ç–∏–Ω–≥–∞–º–∏
- `SearchManager` - —Ñ–∞—Å–∞–¥ –¥–ª—è –ø–æ–∏—Å–∫–∞

### 6. **Module Pattern**
- ES6 –º–æ–¥—É–ª–∏ –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –∫–æ–¥–∞
- –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏

---

## üì¶ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–æ–¥—É–ª–µ–π

```
main.js
  ‚îú‚îÄ‚îÄ Navigation
  ‚îú‚îÄ‚îÄ DataService
  ‚îÇ   ‚îî‚îÄ‚îÄ Config (constants)
  ‚îú‚îÄ‚îÄ AlbumGrid
  ‚îÇ   ‚îú‚îÄ‚îÄ DataService
  ‚îÇ   ‚îî‚îÄ‚îÄ RatingUtils
  ‚îú‚îÄ‚îÄ RatingManager
  ‚îÇ   ‚îú‚îÄ‚îÄ RatingUtils
  ‚îÇ   ‚îú‚îÄ‚îÄ EventBus
  ‚îÇ   ‚îî‚îÄ‚îÄ Config
  ‚îú‚îÄ‚îÄ SearchManager
  ‚îÇ   ‚îú‚îÄ‚îÄ RatingManager
  ‚îÇ   ‚îî‚îÄ‚îÄ Config
  ‚îú‚îÄ‚îÄ AuthService
  ‚îú‚îÄ‚îÄ UserService
  ‚îú‚îÄ‚îÄ UIManager
  ‚îÇ   ‚îú‚îÄ‚îÄ AuthService
  ‚îÇ   ‚îî‚îÄ‚îÄ UserService
  ‚îú‚îÄ‚îÄ AlbumMenuManager
  ‚îÇ   ‚îú‚îÄ‚îÄ AuthService
  ‚îÇ   ‚îú‚îÄ‚îÄ RatingManager
  ‚îÇ   ‚îú‚îÄ‚îÄ DataService
  ‚îÇ   ‚îî‚îÄ‚îÄ Config
  ‚îú‚îÄ‚îÄ EventBus
  ‚îî‚îÄ‚îÄ Config (constants)
```

---

## üêõ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –±–∞–≥–∏

### Bug #1: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–≤–µ–∑–¥ –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –º–æ–¥–∞–ª–∫–∏ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–π—Ç–∏–Ω–≥–∞ –∑–≤–µ–∑–¥—ã –Ω–∞–∫–ª–∞–¥—ã–≤–∞–ª–∏—Å—å –¥—Ä—É–≥ –Ω–∞ –¥—Ä—É–≥–∞.

**–ü—Ä–∏—á–∏–Ω–∞:** –ú–µ—Ç–æ–¥ `updateStars()` –¥–æ–±–∞–≤–ª—è–ª –∫–ª–∞—Å—Å—ã, –Ω–æ –Ω–µ —É–¥–∞–ª—è–ª —Å—Ç–∞—Ä—ã–µ.

**–†–µ—à–µ–Ω–∏–µ:**
```javascript
// –ë–´–õ–û:
updateStars(rating) {
    if (index < rating) {
        star.classList.add('filled');
    } else {
        star.classList.add('empty');
    }
}

// –°–¢–ê–õ–û:
updateStars(rating, isHover = false) {
    star.classList.remove('filled', 'empty', 'hover'); // –û—á–∏—â–∞–µ–º –≤—Å–µ
    if (index < rating) {
        star.classList.add(isHover ? 'hover' : 'filled');
    } else {
        star.classList.add('empty');
    }
}
```

### Bug #2: –°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è/—É–¥–∞–ª–µ–Ω–∏—è —Ä–µ–π—Ç–∏–Ω–≥–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∏—Å—å –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –¥–æ —Ä—É—á–Ω–æ–π –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏.

**–ü—Ä–∏—á–∏–Ω–∞:** 
1. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ `handleSave()` - –ø–µ—Ä–µ–¥–∞–≤–∞–ª—Å—è `e.detail.modal` –≤–º–µ—Å—Ç–æ `e.detail`
2. –û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–∏ —Å–æ–±—ã—Ç–∏—è EventBus –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥—Ä—É–≥–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

**–†–µ—à–µ–Ω–∏–µ:**
```javascript
// –ë–´–õ–û:
modal.addEventListener('save', async (e) => {
    await this.handleSave(e.detail.modal, existingRating); // ‚ùå –ù–µ–≤–µ—Ä–Ω–æ
});

// –°–¢–ê–õ–û:
modal.addEventListener('save', async (e) => {
    await this.handleSave(e.detail, existingRating); // ‚úÖ –í–µ—Ä–Ω–æ
});

// –î–æ–±–∞–≤–ª–µ–Ω EventBus:
async handleSave(ratingData, existingRating) {
    await this.updateRating(existingRating.id, ratingData);
    eventBus.emit(EVENTS.RATING_UPDATED, { ratingData, existingRating });
    window.location.reload();
}
```

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ–¥–∞

| –§–∞–π–ª | –°—Ç—Ä–æ–∫ –∫–æ–¥–∞ | –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å |
|------|------------|-----------------|
| main.js | 209 | –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞, –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è |
| RatingModalComponent.js | 572 | Web Component –º–æ–¥–∞–ª–∫–∏ |
| AlbumMenuManager.js | 202 | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ–Ω—é |
| SearchManager.js | ~200 | –ü–æ–∏—Å–∫ –∞–ª—å–±–æ–º–æ–≤ |
| RatingManager.js | 172 | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–π—Ç–∏–Ω–≥–∞–º–∏ |
| AlbumGrid.js | ~150 | –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–µ—Ç–∫–∏ |
| AuthService.js | ~150 | –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è |
| DataService.js | ~250 | –†–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏ |
| EventBus.js | 139 | –°–∏—Å—Ç–µ–º–∞ —Å–æ–±—ã—Ç–∏–π |
| constants.js | 112 | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è |
| UIManager.js | ~200 | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ UI |
| UserService.js | 50 | –†–∞–±–æ—Ç–∞ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ |
| RatingUtils.js | ~100 | –£—Ç–∏–ª–∏—Ç—ã —Ä–µ–π—Ç–∏–Ω–≥–æ–≤ |
| Navigation.js | ~80 | –ù–∞–≤–∏–≥–∞—Ü–∏—è |

**–í—Å–µ–≥–æ:** ~2,500 —Å—Ç—Ä–æ–∫ JavaScript –∫–æ–¥–∞

---

## üöÄ –£–ª—É—á—à–µ–Ω–∏—è –ø–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

### 1. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- ‚úÖ –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ —Å–ª–æ–∏ (Presentation ‚Üí Business Logic ‚Üí Data)
- ‚úÖ –°–ª–∞–±–∞—è —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ EventBus
- ‚úÖ –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (Web Components)

### 2. –ö–æ–¥
- ‚úÖ –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –≤–º–µ—Å—Ç–æ –º–∞–≥–∏—á–µ—Å–∫–∏—Ö —á–∏—Å–µ–ª
- ‚úÖ EventBus –≤–º–µ—Å—Ç–æ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
- ‚úÖ Web Components –≤–º–µ—Å—Ç–æ HTML –≤ JS
- ‚úÖ 65% —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ –∫–æ–¥–∞ RatingManager

### 3. Maintainability
- ‚úÖ –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ñ–∏—á–∏
- ‚úÖ –õ–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
- ‚úÖ –ü–æ–Ω—è—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

---

## üîÆ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏—è

1. **–î–æ–±–∞–≤–∏—Ç—å TypeScript** - —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
2. **–ù–∞–ø–∏—Å–∞—Ç—å unit-—Ç–µ—Å—Ç—ã** - Jest –¥–ª—è JS, PHPUnit –¥–ª—è PHP
3. **–ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫** - Vue.js –∏–ª–∏ React
4. **–î–æ–±–∞–≤–∏—Ç—å ErrorHandler** - —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
5. **–£–±—Ä–∞—Ç—å AuthManager.js** - legacy –∫–æ–¥
6. **–î–æ–±–∞–≤–∏—Ç—å State Management** - Vuex/Redux –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π
7. **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫—É** - –æ–±–Ω–æ–≤–ª—è—Ç—å —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤–º–µ—Å—Ç–æ reload
8. **–î–æ–±–∞–≤–∏—Ç—å Progressive Web App** - Service Workers, offline —Ä–µ–∂–∏–º

---

*–î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω: 2025-10-30*  
*–í–µ—Ä—Å–∏—è: 2.0*
